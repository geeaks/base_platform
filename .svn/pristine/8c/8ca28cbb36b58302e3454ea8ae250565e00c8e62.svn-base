package com.ucf.customer.ws.cxf;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

import org.apache.cxf.tools.wsdlto.WSDLToJava;

import com.ucf.platform.framework.core.log.UcfLogger;
import com.ucf.platform.framework.core.log.UcfLoggerFactory;

/**
 * 
 * Description: 根据wsdl文件url，创建客户端调用stub代码类
 * All Rights Reserved.
 * @version 1.0  2014-2-14 下午5:56:39  by 徐军伟（xujunwei@ucfgroup.com）创建
 */
public class Wsdl2JavaUtil {

    private static final UcfLogger LOGGER = UcfLoggerFactory.getLogger(Wsdl2JavaUtil.class);

//	public static void main(String[] args) {
//
//		String wsdlUrl = readLineFromConsole("请输入wsdlUrl");
//		createWsClientClass(wsdlUrl);
//	}
	
	/**
	 * 
	 * Description: 根据webservice描述文件url，创建客户端调用webservice所需要的各种类文件,默认生成文件的路径为当前工程下：src/wsdl2java/create；命令执行后，请自己根据需要删除无用的文件，通常只需保留服务接口文件、BO、Vo文件。
	 * @Version1.0 2014-2-14 下午5:58:58 by 徐军伟（xujunwei@ucfgroup.com）创建
	 * @param webServiceWsdlUrl
	 * 			例如:http://127.0.0.1:8080/cxfServer/hello?wsdl
	 */
	public static void createWsClientClass(String webServiceWsdlUrl) {
		//String wsdlUrl = readString("请输入wsdlUrl：");
		WSDLToJava.main(new String[] {
				// "-impl",//生成实现类
				// "-client",//生成客户端调用
				"-d", "src", //生成文件输出目录
				"-p", "wsdl2java.create",//包路径
				webServiceWsdlUrl //wsdl文件路径或wsdl Url
				});
        LOGGER.info( "创建完毕!");
	}

	/**
	 * 
	 * @param p
	 * @return
	 */
	public static String readLineFromConsole(String p) {
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		String str = null;
		try {
			str = br.readLine();
		} catch (IOException e) {
		}
		return str;
	}
}