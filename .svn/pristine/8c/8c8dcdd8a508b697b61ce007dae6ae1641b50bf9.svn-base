<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ucf.customer">
<!-- insert UcfDistrict --> 
<insert id="insertUcfDistrict" parameterType="ucfDistrict" keyProperty="id" useGeneratedKeys="true">
	<selectKey resultType="String" order="BEFORE" keyProperty="userId">
         SELECT UCF_DISTRICT_SEQ.nextval  FROM DUAL
	</selectKey>
	<![CDATA[
INSERT INTO UCF_DISTRICT(ID,DISTRICT_CODE,DISTRICT_NAME,PROVINCE_ID,CITY_ID) VALUES(#{id, jdbcType=VARCHAR},#{districtCode, jdbcType=VARCHAR},#{districtName, jdbcType=VARCHAR},#{provinceId, jdbcType=VARCHAR},#{cityId, jdbcType=VARCHAR})
	]]>
</insert>

<!-- update UcfDistrict -->
<update id="updateUcfDistrict" parameterType="ucfDistrict">
	<![CDATA[
UPDATE UCF_DISTRICT A SET A.ID=ID
	]]>
	<if test="null != districtCode">
	<![CDATA[
,A.DISTRICT_CODE = #{districtCode}
	]]>
	</if>
	<if test="null != districtName">
	<![CDATA[
,A.DISTRICT_NAME = #{districtName}
	]]>
	</if>
	<if test="null != provinceId">
	<![CDATA[
,A.PROVINCE_ID = #{provinceId}
	]]>
	</if>
	<if test="null != cityId">
	<![CDATA[
,A.CITY_ID = #{cityId}
	]]>
	</if>
	<![CDATA[
		WHERE  ID = #{userId} 
	]]>
</update>

<!-- delete UcfDistrict -->
<delete id="deleteUcfDistrict" parameterType="string">
	<![CDATA[
		DELETE FROM UCF_DISTRICT WHERE id = #{id}
	]]>
</delete>

<!-- select UcfDistrict -->
<select id="queryUcfDistrictByWhere" resultType="UcfDistrict" parameterType="ucfDistrict" >
	<![CDATA[
	SELECT A.ID AS id,
	       A.DISTRICT_CODE AS districtCode,
	       A.DISTRICT_NAME AS districtName,
	       A.PROVINCE_ID   AS provinceId,
	       A.CITY_ID       AS cityId
	  FROM UCF_DISTRICT A WHERE 1=1
	]]>
	<if test="null != id and '' != id">
	<![CDATA[
	AND A.ID = #{id}
	]]>
	</if>
	<if test="null != districtCode and '' != districtCode">
	<![CDATA[
	AND A.DISTRICT_CODE = #{districtCode}
	]]>
	</if>
	<if test="null != cityId and '' != cityId">
	<![CDATA[
	AND A.CITY_ID = #{cityId}
	]]>
	</if>
	<if test="null != provinceId and '' != provinceId">
	<![CDATA[
	AND A.PROVINCE_ID = #{provinceId}
	]]>
	</if>
</select>
<select id="queryAllProvinceData" resultType="HashMap">
	<![CDATA[
SELECT A.PROVINCE_CODE AS CODE,A.PROVINCE_NAME AS NAME FROM UCF_PROVINCE A
	]]>
</select>
<select id="queryAllCityData" resultType="HashMap">
	<![CDATA[
SELECT A.CITY_CODE CODE, A.CITY_NAME NAME FROM UCF_CITY A LEFT JOIN UCF_PROVINCE B ON B.ID = A.PROVINCE_ID
	]]>
</select>
<select id="queryAllDistrictData" resultType="HashMap">
	<![CDATA[
SELECT A.DISTRICT_CODE CODE,A.DISTRICT_NAME NAME FROM UCF_DISTRICT A LEFT JOIN UCF_CITY B ON B.ID = A.CITY_ID
	]]>
</select>
</mapper>
