<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ucf.customer">
<!-- insert UcfCustomer -->
<insert id="insertUcfCustomer" parameterType="ucfCustomer" keyProperty="id" useGeneratedKeys="true">
	<![CDATA[
		INSERT INTO UCF_CUSTOMER (
	CUSTOMER_ID,NAME,NATIONAL,CERT_TYPE,CERT_NO,TYPE,CERT_STATUS,OPEN_STATUS,ENABLE_STATUS,GMT_CREATE,GMT_MODIFIED,MEMO,EXT_FLAG,CARD_NO
		)VALUES(
		UCF_CUSTOMER_SEQ.nextval,#{name,jdbcType=VARCHAR},#{national,jdbcType=CHAR},#{certType,jdbcType=VARCHAR},#{certNo,jdbcType=VARCHAR},#{type,jdbcType=CHAR},#{certStatus,jdbcType=CHAR},#{openStatus,jdbcType=CHAR},#{enableStatus,jdbcType=CHAR},sysdate,sysdate,#{memo,jdbcType=VARCHAR},#{extFlag,jdbcType=CHAR},#{cardNo,jdbcType=VARCHAR})
	]]>
</insert>

<select id="getUcfCustomerId"  resultType="java.lang.String">
select UCF_CUSTOMER_SEQ.nextval from dual
</select>

<!-- update UcfCustomer -->
<update id="updateUcfCustomer" parameterType="ucfCustomer">
	<![CDATA[
		UPDATE 
		UCF_CUSTOMER 
		SET 
		 CUSTOMER_ID=CUSTOMER_ID
	]]>
			<if test="null != name">
	<![CDATA[
,NAME = #{name}
	]]>
	</if>
	<if test="null != national">
	<![CDATA[
,NATIONAL = #{national}
	]]>
	</if>
	<if test="null != certType">
	<![CDATA[
,CERT_TYPE = #{certType}
	]]>
	</if>
	<if test="null != certNo">
	<![CDATA[
,CERT_NO = #{certNo}
	]]>
	</if>
	<if test="null != type">
	<![CDATA[
,TYPE = #{type}
	]]>
	</if>
	<if test="null != certStatus">
	<![CDATA[
,CERT_STATUS = #{certStatus}
	]]>
	</if>
	<if test="null != openStatus">
	<![CDATA[
,OPEN_STATUS = #{openStatus}
	]]>
	</if>
	<if test="null != enableStatus">
	<![CDATA[
,ENABLE_STATUS = #{enableStatus}
	]]>
	</if>
	<![CDATA[
	,GMT_MODIFIED = sysdate
	]]>
	<if test="null != memo">
	<![CDATA[
,MEMO = #{memo}
	]]>
	</if>
	<if test="null != extFlag">
	<![CDATA[
,EXT_FLAG = #{extFlag}
	]]>
	</if>
	<if test="null != cardNo">
	<![CDATA[
,CARD_NO = #{cardNo}
	]]>
	</if>
	<![CDATA[

		WHERE  CUSTOMER_ID = #{customerId} 
	]]>
</update>

<!-- delete UcfCustomer -->
<delete id="deleteUcfCustomer" parameterType="string">
	<![CDATA[
		DELETE FROM UCF_CUSTOMER WHERE id = #{id}
	]]>
</delete>

<!-- select UcfCustomer -->
<select id="queryUcfCustomerByWhere" resultType="ucfCustomer" parameterType="ucfCustomer" >
<![CDATA[
SELECT 
CUSTOMER_ID as customerId,NAME as name,NATIONAL as national,CERT_TYPE as certType,CERT_NO as certNo,TYPE as type,CERT_STATUS as certStatus,OPEN_STATUS as openStatus,ENABLE_STATUS as enableStatus,GMT_CREATE as gmtCreate,GMT_MODIFIED as gmtModified,MEMO as memo,EXT_FLAG as extFlag,CARD_NO as cardNo FROM UCF_CUSTOMER WHERE ROWNUM <= 10 
]]>
<if test="null != customerId and '' != customerId">
<![CDATA[
AND CUSTOMER_ID = #{customerId}
]]>
</if>
<if test="null != name and '' != name">
<![CDATA[
AND NAME = #{name}
]]>
</if>
<if test="null != national and '' != national">
<![CDATA[
AND NATIONAL = #{national}
]]>
</if>
<if test="null != certType and '' != certType">
<![CDATA[
AND CERT_TYPE = #{certType}
]]>
</if>
<if test="null != certNo and '' != certNo">
<![CDATA[
AND CERT_NO = #{certNo}
]]>
</if>
<if test="null != type and '' != type">
<![CDATA[
AND TYPE = #{type}
]]>
</if>
<if test="null != certStatus and '' != certStatus">
<![CDATA[
AND CERT_STATUS = #{certStatus}
]]>
</if>
<if test="null != openStatus and '' != openStatus">
<![CDATA[
AND OPEN_STATUS = #{openStatus}
]]>
</if>
<if test="null != enableStatus and '' != enableStatus">
<![CDATA[
AND ENABLE_STATUS = #{enableStatus}
]]>
</if>
<if test="null != gmtCreate">
<![CDATA[
AND GMT_CREATE = #{gmtCreate}
]]>
</if>
<if test="null != gmtModified">
<![CDATA[
AND GMT_MODIFIED = #{gmtModified}
]]>
</if>
<if test="null != memo and '' != memo">
<![CDATA[
AND MEMO = #{memo}
]]>
</if>
<if test="null != extFlag and '' != extFlag">
<![CDATA[
AND EXT_FLAG = #{extFlag}
]]>
</if>
<if test="null != cardNo and '' != cardNo">
<![CDATA[
AND CARD_NO = #{cardNo}
]]>
</if>
</select>


<!-- select UcfCustomer -->
<select id="getUcfCustomerById" resultType="ucfCustomer" parameterType="java.lang.String" >
<![CDATA[
SELECT 
t.CUSTOMER_ID as customerId,t.NAME as name,t.NATIONAL as national,
t.CERT_TYPE as certType,t.CERT_NO as certNo,t.TYPE as type,
t.CERT_STATUS as certStatus,t.OPEN_STATUS as openStatus,
t.ENABLE_STATUS as enableStatus,t.GMT_CREATE as gmtCreate,
t.GMT_MODIFIED as gmtModified,t.MEMO as memo,t.EXT_FLAG as extFlag,
c.CARD_NO as cardNo FROM UCF_CUSTOMER t 
left join ucf_card c on t.customer_id = c.customer_id 
WHERE c.USER_ID = #{userId}
]]>
</select>

</mapper>
