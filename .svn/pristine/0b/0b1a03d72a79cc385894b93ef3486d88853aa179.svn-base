﻿﻿﻿<%@ page language="java" import="java.util.*" pageEncoding="UTF-8" contentType="text/html; charset=utf-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>先锋支付--用户注册</title>
<jsp:include page="/WEB-INF/views/jsp/common/oldcommon.jsp" />
<link href="${staticbase_platformPath}/new/css/frist-register.css" rel="stylesheet" type="text/css" />
<link href="${staticbase_platformPath}/css/ucfgroup-nicevalidator-extends.css" rel="stylesheet" />
</head>
<body>
	<c:import url="headforregister.jsp"></c:import>
	<section class="bgc-gray">
	<div class="gs-center register">
		<img src="${staticbase_platformPath}/images/fund/asd_02.png" />
		<div class="tab-content help-tab-content border-none">
			<div class="tab-pane active">
				<div class="background-wite">
					<form id="userInfoForm" name="userInfoForm" action="${basePath}/fund/register/registerUserInfo" class="pers-inf" style="padding-top:30px; width:80%;margin:0 auto;"
						method="post" data-validator-option="{theme:'ucfgroup_effect',timely:2}">
						<input name="userName" value="${username}" type="hidden" />
						<input name="realName" value="${realName}" type="hidden" />
						<input name="certNo" value="${certNo}" type="hidden" />
					<p class="red">
						<label>登录密码</label>
					</p>
						<p>
							<label for="lgnPwd">设置登录密码 :</label>
							<input id="lgnPwd" name="lgnPwd" type="password" tabindex="2" data-tip="6-20位字符，须包含：大写字母、小写字母、数字、符号至少两种" />
						</p>
						<p>
							<label for="name">确认登录密码 :</label>
							<input id="repeatlgnPwd" name="repeatlgnPwd" type="password" tabindex="3" data-tip="请与上面保持一致" />
						</p>
						<div class="zc-line"></div>
					<p class="red">
						<label for="name">支付密码</label>
					</p>
						<p>
							<label for="paymentPassword">设置支付密码 :</label>
							<input id="paymentPassword" name="paymentPassword" type="password" tabindex="4" data-tip="6-20位字符，须包含：大写字母、小写字母、数字、符号至少两种" />
						</p>
						<p>
							<label for="repeatpaymentPassword">确认支付密码 :</label> 
							<input id="repeatpaymentPassword" name="repeatpaymentPassword" type="password" tabindex="5" data-tip="请与上面保持一致" />
						</p>
						<div class="zc-line"></div>
					<p class="red">
						<label>身份信息</label>
					</p>
					<p>
						<label for="realName">真实姓名 :</label>
						<input id="realName" value="${realName}" disabled type="text" tabindex="1" data-tip="请输入您的真实姓名" />
					</p>
					<p>
						<label for="certNo">身份证号码 :</label>
						<input id="certNo" value="${hiddenCertNo}" disabled type="text" tabindex="6" data-tip="请输入18位身份证号" />
					</p>
					<p>
						<label for="name">短信验证码 :</label> 
						<input id="vfyCode" name="vfyCode" class="w105" type="text" maxlength="6" tabindex="2" data-tip="输入手机6位验证码，如：888666" /> 
						<input id="validPhoneCode" name="validPhoneCode" style="width:105px; font-size: 12px; padding-left:0px; margin-left:5px; margin-right:5px;"
							type="button" onclick="sendSMSReg();" value="获取验证码" />
						<div style="width:5px;"></div>
					</p>
					<div class="zc-line"></div>
					<a class="btn mt20 mgl113" onclick="subForm();">下一步</a>
					</form>
				</div>
			</div>
		</div>
	</section>
	<c:import url="/WEB-INF/views/jsp/common/newfooter.jsp"></c:import>
</body>
<script type="text/javascript">
$('#vfyCode').keyup(function() {
	var v = $(this).val();
	if (v != null && v.length == 6) {
		$(this).trigger("validate");
	}
});
	function subForm() {
		$("#userInfoForm").submit();
	}
	function sendSMSReg() {
		var param = {
			cellNo: '',
			smsType : 0
		};
		$.ajax({
			type:'POST',
			async:true,
			timeout:30000,
			url:'${basePath}/common/vfycode/send',
			data:param,
			beforeSend:function() {
				$('#validPhoneCode').attr("disabled","disabled");
			},
			error:function(){
				$('#validPhoneCode').removeAttr("disabled");
			},
			success:function(result) {
				freezeTime();
			},
			dataType:"json"
		});
	};
	$(document).ready(function() {
		$('#userInfoForm').validator({
			stopOnError : false,
			timely : true,
			rules : {
				pwdCheck : function(element) {
					return (!(/^[a-z]*$/.test(element.value)) && !(/^[A-Z]*$/.test(element.value)) && !(/^[0-9]*$/.test(element.value)) 
							&& /^[A-Za-z0-9]*$/.test(element.value)) || '密码不符合要求';
				},
				pwdMath : function() {
					var lgnPwd = $("#lgnPwd").val();
					var paymentPassword = $("#paymentPassword").val();
					if (lgnPwd == paymentPassword) {
						return '登录密码不可与支付密码相同';
					}
					return true;
				}
			},
			fields : {
				'lgnPwd' : 'required;length[6~20];pwdCheck;',
				'repeatlgnPwd' : {
					rule : "required;match(lgnPwd)",
					msg : {
						match : "请确保两次输入登录密码相同!"
					}
				},
				'paymentPassword' : 'required;length[6~20];pwdCheck;pwdMath;',
				'repeatpaymentPassword' : {
					rule : "required;match(paymentPassword)",
					msg : {
						match : "请确保两次输入支付密码相同!"
					}
				},
				'vfyCode' : 'required;'
			}
		});
	});
</script>
<script src="${staticbase_platformPath}/js/jquery.validator.js" type="text/javascript"></script>
<script src="${staticbase_platformPath}/js/zh_CN.js" type="text/javascript"></script>
<script src="${staticbase_platformPath}/js/ucfgroup-nicevalidator-extends.js" type="text/javascript"></script>
</html>