package com.ucf.customer.test.api;

import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;

import com.alibaba.fastjson.JSON;
import com.ucf.customer.api.base_platformService;
import com.ucf.customer.api.bo.BaseResultBO;
import com.ucf.customer.api.bo.base_platformCommonResult;
import com.ucf.customer.test.BaseTest;
import com.ucf.customer.ws.bo.SmsBO;
import com.ucf.customer.ws.service.UserServiceWS;

/**
 * @Description: 短信服务测试类
 * @ClassName: MessageServiceTest
 * @author gaoxiang
 * @date 2015-5-15 下午3:23:22
 */ 
public class MessageServiceTest extends BaseTest {
	
	@Autowired
	private base_platformService base_platformService;
	
	@Autowired
	private UserServiceWS userServiceWS;
	
	@Test
	public void 发送自定义内容短信() throws Exception{
		base_platformCommonResult<String> sendSms = base_platformService.sendSms("18811511061","测试吧，自定义的");
		System.err.println(JSON.toJSONString(sendSms));
	}
	
	/**
	 * @Description: %vfyCode%会被替换成验证码
	 * @throws Exception 
	 * @return void 返回类型
	 * @author gaoxiang
	 * @date 2015-5-15 下午4:22:37
	 */
	@Test
	public void 发送自定义模板短信验证码() throws Exception{
		base_platformCommonResult<String> sendSms = 
				base_platformService.sendTemplateSMS("M100007", "18811511061", "前边的%vfyCode%后边的");
		System.err.println(JSON.toJSONString(sendSms));
	}

	@Test
	public void 发送自定义模板短信验证码2() throws Exception{
		SmsBO sendSms = userServiceWS.sendSms("M100", "18811511061", "前边的%vfyCode%后边的");
		System.err.println(JSON.toJSONString(sendSms));
	}
	
	@Test
	public void 发送模板短信验证码() throws Exception{
		SmsBO smsBo = userServiceWS.sendSms("M200000390", "18811511061");
		System.err.println(JSON.toJSONString(smsBo));
	}
	
	@Test
	public void 发送模板短信验证码2() throws Exception{
		BaseResultBO baseResultBO = base_platformService.sendVfyCodeSMS("18811511061");
		System.err.println(JSON.toJSONString(baseResultBO));
	}
	
	@Test
	public void 校验短信验证码() throws Exception{
		String phone = "18811511061";
		String code = "203515";
		BaseResultBO checkVfyCode = base_platformService.checkVfyCode(phone, code);
		System.err.println(JSON.toJSONString(checkVfyCode));
	}
	
	@Test
	public void 校验短信验证码2() throws Exception{
		SmsBO checkSms = userServiceWS.checkSms("无所谓瞎输", "18811511061", "203515");
		System.err.println(JSON.toJSONString(checkSms));
	}
	
}
