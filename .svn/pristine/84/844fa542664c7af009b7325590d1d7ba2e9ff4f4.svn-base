package com.ucf.customer.utils;

import java.io.IOException;

import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpException;
import org.apache.commons.httpclient.NameValuePair;
import org.apache.commons.httpclient.methods.PostMethod;

public class HttpUtil {
	
	
	public static void sendMsg(String url,String host) throws HttpException, IOException {
		HttpClient client = new HttpClient();
		String[] sts=host.split(":");
//		client.getHostConfiguration().setHost("192.168.3.84", 8080, "http");
		client.getHostConfiguration().setHost(sts[0], Integer.parseInt(sts[1]), "http");
		// 使用POST方式提交数据
//		PostMethod method = getPostMethod("/pay/login/uniologin.do?email=18701291657");
		PostMethod method = getPostMethod(url);
		client.executeMethod(method);
		// 打印服务器返回的状态
		// 打印结果页面
//		String response = new String(method.getResponseBodyAsString().getBytes("8859_1"));
		// 打印返回的信息
		method.releaseConnection();
	
	}

	/**
	 * 使用POST方式提交数据
	 * @return
	 */
	private static PostMethod getPostMethod(String url) {
//		String url = "/pay/login/uniologin.do?email=18701291657";
		PostMethod post = new UTF8PostMethod(url);
		NameValuePair message = new NameValuePair("message", "消息内容。");
		post.setRequestBody(new NameValuePair[]{message});
		return post;
	}

	//Inner class for UTF-8 support   
	public static class UTF8PostMethod extends PostMethod{   
		public UTF8PostMethod(String url){   
		super(url);   
		}   
		@Override   
		public String getRequestCharSet() {   
			//return super.getRequestCharSet();   
			return "UTF-8";   
		}
		
	}


}
